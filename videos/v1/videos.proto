syntax = "proto3";

package videos.v1;

import "google/api/annotations.proto";

option go_package = "msostream/gate;gate";

enum Visibility {
    // Video is uploaded, transcoded and public 
    PUBLIC = 0;
    // Video is uploaded, transcoded and private
    PRIVATE = 1;
    // Video is uploaded, but not transcoded
    PROCESSING = 2;
    // Video is not uploaded
    DRAFT = 3;
}

message Video {
    string id = 1;
    string title = 2;
    string description = 3;
    string author = 4;
    string date = 5;
    Visibility visibility = 6;
}

message CreateVideoRequest {
    string title = 1;
    string description = 2;
    Visibility visibility = 3;
}

message CreateVideoResponse {
    string id = 1;
}

message GetVideoRequest {
    string id = 1;
}

message GetVideoResponse {
    Video video = 1;
}

message UpdateVideoRequest {
    Video video = 1;
}

message UpdateVideoResponse {
    Video video = 1;
}

service VideoService {
  rpc CreateVideo(CreateVideoRequest) returns (CreateVideoResponse) {
      option (google.api.http) = {
          post: "/v1/videos"
      };
  }
  rpc UpdateVideo(UpdateVideoRequest) returns (UpdateVideoResponse) {
      option (google.api.http) = {
          put: "/v1/videos/{video.id}"
      };
  }
  rpc GetVideo(GetVideoRequest) returns (GetVideoResponse) {
      option (google.api.http) = {
          get: "/v1/videos/{id}"
      };
  }
}
